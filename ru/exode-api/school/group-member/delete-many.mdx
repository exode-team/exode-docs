---
title: "Удаление участников"
description: "Удаление нескольких пользователей из группы школы"
---

import HeaderParamFields from '/snippets/ru/exode-api/header-params-fields.mdx';

<Tip>
  Это операция удаления нескольких пользователей из группы одновременно.
</Tip>

<Warning>
    При удалении участников из группы система автоматически проверяет их доступы к продукту:

    -> Если пользователь остается участником других групп с тем же продуктом — доступ сохраняется.

    -> Если пользователь больше не является участником групп с этим продуктом — доступ полностью деактивируется.
</Warning>

<HeaderParamFields/>

## Параметры запроса

<Tip>
  Максимальное количество пользователей, которое можно удалить за один запрос — 100. Для удаления большего
  количества пользователей используйте несколько запросов.
</Tip>

<ParamField body="userIds" type="array" required>
  Массив идентификаторов пользователей для удаления из группы. Максимум 100 пользователей за один запрос.
</ParamField>

<Info>
  Если пользователь не является участником группы, он будет проигнорирован. В ответе будет указано количество
  фактически удаленных участников.
</Info>

<RequestExample>
```bash cURL
curl --location --request DELETE 'https://api.exode.biz/saas/v2/group/{{ groupId }}/member/delete-many' \
  --header 'Seller-Id: {{ sellerId }}' \
  --header 'School-Id: {{ schoolId }}' \
  --header 'Content-Type: application/json' \
  --header 'Authorization: Bearer YOUR_TOKEN' \
  --data-raw '{
    "userIds": [8, 15, 23]
  }'
```

```javascript Node.js
const axios = require('axios');

const removeMembersFromGroup = async () => {
  try {
    const response = await axios.delete(
      'https://api.exode.biz/saas/v2/group/{{ groupId }}/member/delete-many',
      {
        data: {
          userIds: [8, 15, 23]
        },
        headers: {
          'Seller-Id': '{{ sellerId }}',
          'School-Id': '{{ schoolId }}',
          'Content-Type': 'application/json',
          'Authorization': 'Bearer YOUR_TOKEN'
        }
      }
    );

    console.log('Members removed:', response.data.payload.affected);
  } catch (error) {
    console.error('Error:', error.response?.data || error.message);
  }
};

removeMembersFromGroup();
```

```php PHP
<?php

$url = 'https://api.exode.biz/saas/v2/group/{{ groupId }}/member/delete-many';
$data = [
  'userIds' => [8, 15, 23]
];

$headers = [
  'Seller-Id: {{ sellerId }}',
  'School-Id: {{ schoolId }}',
  'Content-Type: application/json',
  'Authorization: Bearer YOUR_TOKEN'
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE');
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

if ($httpCode === 200) {
  $result = json_decode($response, true);
  echo "Members removed successfully\n";
  echo "Affected: " . $result['payload']['affected'] . "\n";
  print_r($result['payload']);
} else {
  echo "Error: HTTP $httpCode\n";
  echo $response;
}
?>
```

```python Python
import requests
import json

url = 'https://api.exode.biz/saas/v2/group/{{ groupId }}/member/delete-many'

data = {
  'userIds': [8, 15, 23]
}

headers = {
  'Seller-Id': '{{ sellerId }}',
  'School-Id': '{{ schoolId }}',
  'Content-Type': 'application/json',
  'Authorization': 'Bearer YOUR_TOKEN'
}

try:
  response = requests.delete(url, json=data, headers=headers)
  response.raise_for_status()

  result = response.json()
  print('Members removed successfully:')
  print(f"Affected: {result['payload']['affected']}")
  print(json.dumps(result['payload'], indent=2, ensure_ascii=False))

except requests.exceptions.RequestException as e:
  print(f'Error: {e}')
  if hasattr(e, 'response') and e.response is not None:
    print(f'Response: {e.response.text}')
```
</RequestExample>

<ResponseExample>
```json Success
{
  "success": true,
  "code": 200,
  "payload": {
    "affected": 1
  }
}
```
```json Success - No Members Found
{
  "success": true,
  "code": 200,
  "payload": {
    "affected": 0
  }
}
```
```json Error - Group Not Found
{
  "code": 404,
  "success": false,
  "cause": "GroupNotFound",
  "message": "Group not found",
  "error": "Group not found"
}
```
```json Error - User Not Found
{
  "code": 400,
  "success": false,
  "cause": "UserNotFound",
  "message": "One or more users not found",
  "error": "One or more users not found"
}
```
```json Error - Too Many Users
{
  "code": 400,
  "success": false,
  "cause": "TooManyUsers",
  "message": "Maximum 100 users allowed per request",
  "error": "Maximum 100 users allowed per request"
}
```
```json Error - Access Denied
{
  "code": 403,
  "success": false,
  "cause": "AccessDenied",
  "message": "Access denied",
  "error": "Access denied"
}
```
</ResponseExample>

## Параметры ответа

<ResponseField name="affected" type="integer" required>
  Количество фактически удаленных участников группы. Если пользователь не был участником группы, он не учитывается в
  этом числе.
</ResponseField>

## Требования к правам доступа

<Check>
  Для удаления участников из группы требуется **право на управление пользователями школы**.
</Check>

<Warning>
  Сервисный пользователь должен быть аутентифицирован по токену и иметь соответствующие права доступа к указанной
  школе.
</Warning>

